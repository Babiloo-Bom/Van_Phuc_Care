# ============================================
# Development Dockerfile for Backend API
# With hot reload using nodemon
# ============================================

FROM node:20-alpine

# Install dependencies
RUN apk add --no-cache \
    python3 \
    make \
    g++ \
    libc6-compat \
    curl

WORKDIR /app

# Copy package files
COPY package.json package-lock.json* ./

# Install all dependencies (including dev)
RUN npm ci && \
    npm cache clean --force

# Copy source code
COPY . .

# Expose port
ENV PORT=3000
EXPOSE 3000

# Start development server with watch mode
CMD ["npm", "run", "watch"]

